exit
new_state
current_state
continue
current_state
exit
current_state
next
current_state
continue
new_state
current_state
continue
current_state
continue
exit
@current_state.length
@current_state
